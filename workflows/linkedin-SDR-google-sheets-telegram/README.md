# LinkedIn SDR Agent Workflow

**File:** `LinkedIn SDR 5-mini-v2.json`

## Overview

This workflow is an AI-powered Sales Development Representative (SDR) agent. It takes an **Ideal Customer Profile (ICP)** from the user, searches for matching profiles on LinkedIn (via Apify) or the Web (via Google Search), qualifies them, checks for duplicates in a Google Sheet, and saves valid prospects for outreach.

## Workflow Flow

```
Chat Trigger (ICP Input) â†’ AI Agent â†’ Tools (Search / Dedupe / Save) â†’ Report to User
```

1.  **Input**: User sends an ICP description (e.g., "Marketing Managers in SaaS companies in London").
2.  **Search**: Agent uses `Search_linkedin_apify` or `Google_Search` to find candidates.
3.  **Qualify**: Agent evaluates candidates against the ICP criteria.
4.  **Dedupe**: Agent checks `Check_duplicates_exist` tool (Google Sheets).
5.  **Save**: If the lead is new and qualified, Agent uses `Save_Lead` tool to append to the Sheet.
6.  **Report**: Agent replies to the user with a summary of found leads.

## Node Details

### 1. LI lead gen agent (`@n8n/n8n-nodes-langchain.agent`)
-   **Model**: GPT-4o-mini (configured via OpenAI Chat Model node).
-   **Role**: B2B Lead Research Assistant.
-   **Logic**:
    -   SEARCH -> QUALIFY -> CHECK DUPLICATES -> SAVE.
    -   Detailed instructions in the System Message to ensure consistent data extraction.

### 2. Tools

#### ðŸ” Search_linkedin_apify (`@apify/n8n-nodes-apify.apifyTool`)
-   **Purpose**: Scrapes LinkedIn profiles.
-   **Actor**: `harvestapi/linkedin-profile-search`
-   **Input**: JSON search parameters generated by the Agent.

#### ðŸŒ Google_Search (`@n8n/n8n-nodes-langchain.toolSerpApi`)
-   **Purpose**: General web research to find people or verify company details if Apify results are insufficient.
-   **Provider**: SerpApi.

#### ðŸ“ Check_duplicates_exist (`n8n-nodes-base.googleSheetsTool`)
-   **Purpose**: Reading specific sheet columns to check for existing URLs or Names.
-   **Operation**: Read/Lookup in Google Sheet.
-   **Authentication**: Service Account (recommended) or OAuth.

#### ðŸ’¾ Save_Lead (`n8n-nodes-base.googleSheetsTool`)
-   **Purpose**: Saving qualified leads.
-   **Operation**: Append Row.
-   **Columns Saved**: `Job_title`, `Name`, `Surname`, `Company_name`, `Linkedin_profile_url`, `full_profile_text`.

## Configuration Requirements

### Environment & Credentials

1.  **OpenAI API**:
    -   Requires an OpenAI API Key.
    -   Credential Name: `OpenAi account`.

2.  **Google Cloud Platform (Service Account)**:
    -   Requires a Service Account with access to the Google Sheet.
    -   **Important**: You must **Share** the target Google Sheet with the Service Account email (Editor Role).
    -   Credential Name: `Google Service Account account`.

3.  **Apify**:
    -   Requires an Apify API Token.
    -   Credential Name: `Apify account`.
    -   Subscription to `harvestapi/linkedin-profile-search` Actor (check Apify pricing).

4.  **SerpApi** (Optional/Fallback):
    -   Requires SerpApi Key.
    -   Credential Name: `SerpApi account`.

### Google Sheet Setup

1.  Create a Google Sheet.
2.  Add a Header Row with these exact columns:
    *   `Job_title`
    *   `Name`
    *   `Surname`
    *   `Company_name`
    *   `Linkedin_profile_url`
    *   `full_profile_text`
3.  Share the sheet with your Service Account Email.
4.  Update the **Document ID** in the workflow:
    *   Open `Check_duplicates_exist` node -> update `Document ID`.
    *   Open `Save_Lead` node -> update `Document ID`.

## Usage

1.  Import the workflow into n8n.
2.  Configure all Credentials.
3.  Update the Google Sheet ID in the nodes.
4.  Click **"Chat"** in the n8n Editor (or use the execution window).
5.  Type your formatted ICP request.
    *   *Example*: "Find 5 CTOs in Fintech startups in Berlin."

## Troubleshooting

-   **Agent loops or gets stuck**: Check if the "Context Window" in Memory node is too small (increase if needed).
-   **Apify errors**: Ensure you have enough compute units in Apify and the Actor input format is correct.
-   **Sheet permission errors**: Double-check that the Sheet is shared with the EXACT Service Account email address.
